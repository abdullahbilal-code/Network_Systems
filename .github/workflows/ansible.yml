name: Ansible VM Configuration

on:
  workflow_run:
    workflows: ["Terraform Azure VM Deployment"]
    types:
      - completed

jobs:
  ansible:
    runs-on: self-hosted

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Ansible
      run: |
        sudo apt-get update
        sudo apt-get install -y ansible

    - name: Run Ansible Playbook
      run: |
        ansible-playbook -i inventory.ini ansible/playbook.yml
